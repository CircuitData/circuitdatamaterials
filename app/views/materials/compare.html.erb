<div class="jumbotron">
  <form>
    <% @materials.each_with_index do |material, index| %>
      <div class="row">
        <div class="col mb-4">
          <%= label_tag "material #{index+1}" %>
          <%= text_field nil, "material_ids[]", value: params[:material_ids][index], class: "form-control", placeholder: "UUID" %>
        </div>
      </div>
    <% end %>
    <div class="row">
      <div class="col">
        <%= submit_tag "Compare", class: "btn btn-primary" %>
        <%= submit_tag "Add material", class: "btn btn-primary" %>
      </div>
    </div>
  </form>
</div>

<% @materials = @materials.compact %>

<% if @materials.size  > 0 %>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Property</th>
        <% @materials.each do |material| %>
          <th><%= material.name %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% attributes_by_material_function(@materials[0]).each do |attr, val| %>
      <% values = @materials.collect{ |material| material.attributes.fetch(attr)} %>
      <tr>
        <td><%= show_attribute(attr) %></td>
        <% values.each do |value| %>
          <td><%= styled_value(value, values) %></td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
<% end %>